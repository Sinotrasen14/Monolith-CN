# SPDX-FileCopyrightText: 2022 Pieter-Jan Briers
# SPDX-FileCopyrightText: 2023 Arendian
# SPDX-FileCopyrightText: 2023 Checkraze
# SPDX-FileCopyrightText: 2023 DrSmugleaf
# SPDX-FileCopyrightText: 2023 Emisse
# SPDX-FileCopyrightText: 2023 Leon Friedrich
# SPDX-FileCopyrightText: 2023 Morb
# SPDX-FileCopyrightText: 2023 Slava0135
# SPDX-FileCopyrightText: 2023 Vordenburg
# SPDX-FileCopyrightText: 2023 Whisper
# SPDX-FileCopyrightText: 2023 brainfood1183
# SPDX-FileCopyrightText: 2023 coolmankid12345
# SPDX-FileCopyrightText: 2023 deltanedas
# SPDX-FileCopyrightText: 2023 deltanedas <@deltanedas:kde.org>
# SPDX-FileCopyrightText: 2023 keronshb
# SPDX-FileCopyrightText: 2024 Aexxie
# SPDX-FileCopyrightText: 2024 AndresE55
# SPDX-FileCopyrightText: 2024 Dvir
# SPDX-FileCopyrightText: 2024 Ghagliiarghii
# SPDX-FileCopyrightText: 2024 Ilya246
# SPDX-FileCopyrightText: 2024 Krunklehorn
# SPDX-FileCopyrightText: 2024 Nemanja
# SPDX-FileCopyrightText: 2024 Plykiya
# SPDX-FileCopyrightText: 2024 Salvantrix
# SPDX-FileCopyrightText: 2024 Tayrtahn
# SPDX-FileCopyrightText: 2024 Whatstone
# SPDX-FileCopyrightText: 2024 metalgearsloth
# SPDX-FileCopyrightText: 2024 plykiya
# SPDX-FileCopyrightText: 2025 LukeZurg22
# SPDX-FileCopyrightText: 2025 Preston Smith
# SPDX-FileCopyrightText: 2025 Redrover1760
# SPDX-FileCopyrightText: 2025 Zachary Higgs
# SPDX-FileCopyrightText: 2025 starch
#
# SPDX-License-Identifier: AGPL-3.0-or-later

- type: entity
  id: BaseSubdermalImplant
  name: 植入芯片 丨 implant
  description: 一种注射在皮肤下的微型芯片。 丨 A microscopic chip that's injected under the skin.
  abstract: true
  components:
  - type: SubdermalImplant
  - type: Tag
    tags:
    - SubdermalImplant
    - HideContextMenu

#Fun implants

- type: entity
  parent: BaseSubdermalImplant
  id: SadTromboneImplant
  name: 悲伤长号植入物 丨 sad trombone implant
  description: 该植入物会在用户死亡时播放一段悲伤的曲调。 丨 This implant plays a sad tune when the user dies.
  categories: [ HideSpawnMenu ]
  components:
    - type: SubdermalImplant
      whitelist:
        components:
        - MobState # admeme implanting a chair with trombone implant needs to give the chair mobstate so it can die first
    - type: TriggerOnMobstateChange
      mobState:
      - Dead
    - type: EmitSoundOnTrigger
      sound:
        collection: SadTrombone
        params:
          variation: 0.125

- type: entity
  parent: BaseSubdermalImplant
  id: LightImplant
  name: 光植入物 丨 light implant
  description: 该植入体在激活时会从用户的皮肤发出光线。 丨 This implant emits light from the user's skin on activation.
  categories: [ HideSpawnMenu ]
  components:
    - type: SubdermalImplant
      implantAction: ActionToggleLight
    - type: PointLight
      enabled: false
      radius: 2.5
      softness: 5
      mask: /Textures/Effects/LightMasks/cone.png
      autoRot: true
    - type: Tag
      tags:
        - SubdermalImplant
        - HideContextMenu
        - Flashlight
    - type: UnpoweredFlashlight

- type: entity
  parent: BaseSubdermalImplant
  id: BikeHornImplant
  name: 自行车喇叭植入体 丨 bike horn implant
  description: 这个植入物让用户随时随地都能按响喇叭。 丨 This implant lets the user honk anywhere at any time.
  categories: [ HideSpawnMenu ]
  components:
    - type: SubdermalImplant
      implantAction: ActionActivateHonkImplant
    - type: TriggerImplantAction
    - type: EmitSoundOnTrigger
      sound:
        collection: BikeHorn
        params:
          variation: 0.125
    - type: Tag
      tags:
      - BikeHorn

#Security implants

- type: entity
  parent: BaseSubdermalImplant
  id: TrackingImplant
  name: TSFMC追踪植入体 # 单声道 - 现命名为TSFMC 丨 TSFMC tracking implant # Mono - TSFMC named now
  description: 该植入体设有TSFMC无线电频道的状态监测器。# 前线：提及NFSD，无追踪功能 丨 This implant has a condition monitor for the TSFMC radio channel. # Frontier: NFSD mentioned, no tracking
  categories: [ HideSpawnMenu ]
  components:
    - type: SubdermalImplant
      whitelist:
        components:
        - MobState # admeme implanting a chair with tracking implant needs to give the chair mobstate so it can die first
#    - type: SuitSensor # Frontier
#      randomMode: false # Frontier
#      controlsLocked: true # Frontier
#      mode: SensorCords # Frontier
#      activationContainer: "implant" # Frontier
#    - type: DeviceNetwork # Frontier
#      deviceNetId: Wireless # Frontier
#      transmitFrequencyId: SuitSensor # Frontier
#    - type: StationLimitedNetwork # Frontier
#    - type: WirelessNetworkConnection # Frontier
#      range: 500 # Frontier
    - type: TriggerOnMobstateChange
      mobState:
      - Critical
      - Dead
    - type: Rattle
      radioChannel: "Nfsd"

#Traitor implants

- type: entity
  parent: BaseSubdermalImplant
  id: StorageImplant
  name: 存储植入体 丨 storage implant
  description: 该植入体利用蓝空技术在人体内开辟隐藏的存储空间。 丨 This implant grants hidden storage within a person's body using bluespace technology.
  categories: [ HideSpawnMenu ]
  components:
    - type: SubdermalImplant
      implantAction: ActionOpenStorageImplant
      whitelist:
        components:
        - Hands # no use giving a mouse a storage implant, but a monkey is another story...
    - type: Storage
      grid:
      - 0,0,2,2
    - type: ContainerContainer
      containers:
        storagebase: !type:Container
          ents: [ ]
    - type: UserInterface
      interfaces:
        enum.StorageUiKey.Key:
          type: StorageBoundUserInterface

- type: entity
  parent: BaseSubdermalImplant
  id: FreedomImplant
  name: 自由植入体 丨 freedom implant
  description: 该植入物可使用户挣脱手部束缚，最多三次，之后便会停止功能。 丨 This implant lets the user break out of hand restraints up to three times before ceasing to function anymore.
  categories: [ HideSpawnMenu ]
  components:
    - type: SubdermalImplant
      implantAction: ActionActivateFreedomImplant
      whitelist:
        components:
        - Cuffable # useless if you cant be cuffed

- type: entity
  parent: BaseSubdermalImplant
  id: RadioImplant
  name: 无线电植入物 丨 radio implant
  description: 该植入体无需耳机即可接入辛迪加频道。 丨 This implant grants access to the Syndicate channel without a headset.
  categories: [ HideSpawnMenu ]
  components:
  - type: SubdermalImplant
  - type: RadioImplant
    radioChannels:
    - Syndicate

- type: entity
  parent: [ BaseSubdermalImplant, StorePresetUplink ]
  id: UplinkImplant
  name: 上行链路植入物 丨 uplink implant
  description: 该植入物让使用者能够随时接入一个隐藏的辛迪加上行链路。 丨 This implant lets the user access a hidden Syndicate uplink at will.
  categories: [ HideSpawnMenu ]
  components:
  - type: SubdermalImplant
    implantAction: ActionOpenUplinkImplant
    whitelist:
      components:
      - Hands # prevent mouse buying grenade penguin since its not telepathic
  - type: Store
    balance:
      Telecrystal: 0
  - type: UserInterface
    interfaces:
      enum.StoreUiKey.Key:
        type: StoreBoundUserInterface

- type: entity
  parent: BaseSubdermalImplant
  id: EmpImplant
  name: EMP植入物 丨 EMP implant
  description: 该植入体激活时可产生半径2.75米、持续10秒、能量达2.7兆焦耳的电磁脉冲。#前沿科技：已添加单位说明 丨 This implant creates a 2.75 m, 10 s, 2.7 MJ electromagnetic pulse when activated. # Frontier: add units
  categories: [ HideSpawnMenu ]
  components:
    - type: SubdermalImplant
      implantAction: ActionActivateEmpImplant
    - type: TriggerImplantAction
    - type: EmpOnTrigger
      range: 2.75
      energyConsumption: 2700000 # Frontier: 50000<2700000
      disableDuration: 10

- type: entity
  parent: BaseSubdermalImplant
  id: ScramImplant
  name: 扰传植入体 丨 scram implant
  description: 该植入体在激活时会将使用者随机传送至一个大半径范围内的地点。 丨 This implant randomly teleports the user within a large radius when activated.
  categories: [ HideSpawnMenu ]
  components:
    - type: SubdermalImplant
      implantAction: ActionActivateScramImplant
    - type: TriggerImplantAction
    - type: ScramImplant

- type: entity
  parent: BaseSubdermalImplant
  id: DnaScramblerImplant
  name: DNA重组植入体 丨 DNA scrambler implant
  description: 该植入物允许用户随机改变一次自己的外貌和姓名。 丨 This implant lets the user randomly change their appearance and name once.
  categories: [ HideSpawnMenu ]
  components:
    - type: SubdermalImplant
      implantAction: ActionActivateDnaScramblerImplant
      whitelist:
        components:
        - HumanoidAppearance # syndies cant turn hamlet into a human

#Nuclear Operative/Special Exclusive implants

- type: entity
  parent: BaseSubdermalImplant
  id: MicroBombImplant
  name: 微型炸弹植入物 丨 micro-bomb implant
  description: 该植入体在激活时或用户死亡时便会引爆。 丨 This implant detonates the user upon activation or upon death.
  categories: [ HideSpawnMenu ]
  components:
    - type: SubdermalImplant
      permanent: true
      implantAction: ActionActivateMicroBomb
    - type: TriggerOnMobstateChange
      mobState:
      - Dead
    - type: TriggerImplantAction
    - type: ExplodeOnTrigger
    - type: GibOnTrigger
      deleteItems: true
    - type: Explosive
      explosionType: MicroBomb
      totalIntensity: 120
      intensitySlope: 5
      maxIntensity: 30
      canCreateVacuum: false
    - type: Tag
      tags:
        - SubdermalImplant
        - HideContextMenu
        - MicroBomb


- type: entity
  parent: BaseSubdermalImplant
  id: MacroBombImplant
  name: 宏炸弹植入体 丨 macro-bomb implant
  description: 该植入体在死亡时会根据预设倒计时引发巨大爆炸。 丨 This implant creates a large explosion on death after a preprogrammed countdown.
  categories: [ HideSpawnMenu ]
  components:
    - type: SubdermalImplant
      permanent: true
    - type: TriggerOnMobstateChange #Chains with OnUseTimerTrigger
      mobState:
      - Dead
      preventSuicide: true
    - type: OnUseTimerTrigger
      delay: 7
      initialBeepDelay: 0
      beepSound:
        path: /Audio/Machines/Nuke/general_beep.ogg
        params:
          volume: -2
    - type: ExplodeOnTrigger
    - type: GibOnTrigger
      deleteItems: true
    - type: Explosive
      explosionType: Default
      totalIntensity: 3500
      intensitySlope: 15
      maxIntensity: 70
      canCreateVacuum: true
    - type: Tag
      tags:
        - SubdermalImplant
        - HideContextMenu
        - MacroBomb

- type: entity
  parent: BaseSubdermalImplant
  id: DeathAcidifierImplant
  name: 死亡酸蚀植入体 丨 death-acidifier implant
  description: 该植入体在用户死亡时会将其自身及装备一并溶解。 丨 This implant melts the user and their equipment upon death.
  categories: [ HideSpawnMenu ]
  components:
  - type: SubdermalImplant
    permanent: true
    implantAction: ActionActivateDeathAcidifier
  - type: TriggerOnMobstateChange
    mobState:
    - Dead
  - type: TriggerImplantAction
  - type: GibOnTrigger
    deleteItems: true
  - type: SpawnOnTrigger
    proto: Acidifier
  - type: Tag
    tags:
    - SubdermalImplant
    - HideContextMenu
    - DeathAcidifier

- type: entity
  parent: BaseSubdermalImplant
  id: DeathRattleImplant
  name: 死亡喉音植入体 丨 death rattle implant
  description: 该植入体会在使用者陷入危急状态或死亡时通知集团无线电频道。 丨 This implant will inform the Syndicate radio channel should the user fall into critical condition or die.
  categories: [ HideSpawnMenu ]
  components:
    - type: SubdermalImplant
      permanent: true
      whitelist:
        components:
        - MobState # admeme implanting a chair with rattle implant needs to give the chair mobstate so it can die first
    - type: TriggerOnMobstateChange
      mobState:
      - Critical
      - Dead
    - type: Rattle

- type: entity
  parent: BaseSubdermalImplant
  id: FakeMindShieldImplant
  name: 虚假心智防护植入体 丨 fake mindshield implant
  description: 该植入物能让植入者发出虚假信号，神经科技安保平视显示系统会据此识别为已安装思维屏蔽器的个体。 丨 This implant allows the implanter to produce a fake signal that NT security huds use to identify individuals implanted with a mindshield.
  categories: [ HideSpawnMenu ]
  components:
      - type: SubdermalImplant
        implantAction: FakeMindShieldToggleAction
      - type: FakeMindShieldImplant

# Sec and Command implants

- type: entity
  parent: BaseSubdermalImplant
  id: MindShieldImplant
  name: 精神屏蔽植入体 丨 mindshield implant
  description: 该植入体将保护大脑免受外界影响，并能防范精神控制装置。#DeltaV注：心智护盾不强制维持忠诚度 丨 This implant will shield the brain from external influences and prevent mind control devices. # DeltaV - mindshield does not enforce loyalty
  categories: [ HideSpawnMenu ]
  components:
   - type: SubdermalImplant
     permanent: true
   - type: Tag
     tags:
       - MindShield

# Centcomm implants

- type: entity
  parent: BaseSubdermalImplant
  id: RadioImplantCentcomm
  name: 无线电植入物 丨 radio implant
  description: 该植入体无需耳机即可接入中央通讯频道，仅限中央通讯员工授权使用。 丨 This implant grants access to the Centcomm channel without a headset. Only authorized for Centcomm employees.
  categories: [ HideSpawnMenu ]
  components:
  - type: SubdermalImplant
  - type: RadioImplant
    radioChannels:
    - CentCom
